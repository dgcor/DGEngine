{
  "action": [
    { "name": "level.pause", "pause": true },
    {
      "name": "game.fadeOut",
      "action": [
        { "name": "resource.popAll", "id": "currentLevel" },
        { "name": "event.deleteAll" },
        { "name": "load", "file": "loadingScreens/{3}.json" },
        "closeMsgBox",
        { "name": "load", "file": ["level/saveCurrentLevel.json", "%currentLevel.path%"] },
        { "name": "game.fadeIn",
          "action": [
            { "name": "loadingScreen.setProgress", "progress": 35 },
            { "name": "resource.add", "id": "currentLevel" },
            { "name": "level.clearAllObjects", "exclude": "hero" },
            { "name": "level.clearPlayerTextures" },
            { "name": "load", "file": "level/map/{1}/sounds.json" },
            { "name": "loadingScreen.setProgress", "progress": 45 },
            { "name": "load", "file": "level/map/{1}/level.json" },
            { "name": "load", "file": "res/level/actions/colorCycling.json" },
            { "name": "loadingScreen.setProgress", "progress": 80 },
            "loadLevelMusic",
            { "name": "load", "file": ["level/afterLevelLoad.json", "{2}"] },
            { "name": "level.pause", "pause": false },
            { "name": "loadingScreen.setProgress", "progress": 100 },
            "clearPanelText"
          ]
        }
      ]
    }
  ]
}